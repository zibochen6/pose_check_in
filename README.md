# AI Punch Clock System

🎨 智能姿态打卡系统 - 美化版UI，支持背景去除和动漫风格生成

## 快速开始

```bash
# 运行打卡系统
python pose.py
```

按 `q` 退出程序

## ✨ 新特性

### 🎯 单窗口美化UI
- **实时摄像头画面** - 检测姿态和倒计时
- **加载动画** - 模糊背景+旋转圆圈，提示正在生成
- **单窗口结果展示** - 直接显示生成的动漫风格图片
- **自动重置** - 用户离开检测区域后自动重置系统

### 🖼️ 视觉效果
✅ 模糊背景+旋转加载动画  
✅ 单窗口显示结果（640x480）  
✅ 窗口大小始终保持一致  
✅ 渐变标题栏和底部提示  
✅ 状态图标渐变（红→绿）  
✅ 英文提示和引导  

### 🎭 功能流程
1. **等待** → 进入检测区域
2. **检测** → 识别到人物
3. **倒计时** → 保持姿势3秒（实时进度条）
4. **生成中** → 显示模糊+旋转动画
5. **完成** → 单窗口显示生成的动漫风格图片
6. **重置** → 离开区域自动重置

## 📦 功能特性

✅ **自动背景去除** - 使用rembg库自动去除主体背景，生成透明PNG  
✅ **动漫风格生成** - AI将你的pose转化为动漫风格  
✅ **智能姿态识别** - 使用YOLO进行高精度姿态检测  
✅ **3秒倒计时** - 保持姿势3秒完成打卡  
✅ **单窗口显示** - 所有内容在一个窗口展示，结果全屏显示  
✅ **美化UI** - 渐变、边框、阴影等视觉效果  

## 🎨 UI展示说明

### 摄像头模式
- **左上角**：状态提示（英文）
- **右上角**：渐变状态图标（红→黄→绿）
- **黄色框**：检测区域标记

### 加载动画
- 高斯模糊背景
- 旋转圆圈动画
- "Generating your avatar, Please wait..."

### 结果展示（单窗口 640x480）
- **主体**：AI生成的动漫风格图片（自动缩放并居中显示）
- **顶部**：渐变标题栏（60px）- "AI Anime Style - Success!"
- **底部**：提示框（80px）- "Complete! Leave area to reset"
- **特点**：窗口大小与摄像头保持一致，切换无突兀感

## 📁 输出文件

打卡成功后生成两个文件（保存在 `punch_photos/` 目录）：
- `punch_YYYYMMDD_HHMMSS_bg_removed.png` - 去背景图（透明PNG）
- `punch_YYYYMMDD_HHMMSS.jpg` - AI动漫风格图

## 🔧 安装依赖

```bash
pip install opencv-python ultralytics openai requests numpy rembg
```

## ⚙️ 配置

编辑 `config.py` 调整：
- 摄像头索引
- 检测区域大小
- 姿态保持时长
- 稳定性阈值

## 📖 使用说明

1. 运行程序：`python pose.py`
2. 站在黄色检测框内
3. 摆好姿势并保持3秒
4. 等待AI生成动漫风格图片（显示旋转动画）
5. 查看生成结果（单窗口全屏显示）
6. 离开检测区域，系统自动重置

## 相关资源

- rembg: https://github.com/danielgatis/rembg.git
- YOLO: https://github.com/ultralytics/ultralytics
